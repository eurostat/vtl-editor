<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="./docbook.css" type="text/css"?>
<chapter xml:id="domain_repository" xml:lang="en" version="5.0"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd">

    <title>Domain Repository</title>
    <para>
        <figure xml:id="dr_icon">
            <title>Domain repository icon</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="./images/dr_icon_placement.png" align="center" contentwidth="60%"/>
                </imageobject>
            </mediaobject>
        </figure>
        Domain Repository functionality of the VRM allows you to publish script files to domain storage provided by the VRM.
        Published items can be then opened or executed (if applicable) by domain members only.
        Just creating a domain doesn't create a repository - it doesn't exists initially.
        It is only created when first file is published by any user of that domain.
    </para>

    <section xml:id="dr_tree_view">
        <title>File Explorer</title>
        <para><emphasis role="bold">IMPORTANT!</emphasis> It is not possible to create folders in this repository in a given iteration of a VRM application.</para>
        <para>
            <figure>
                <title>Domain Repository file explorer view</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="./images/dr_file_explorer.png" align="center" contentwidth="60%"/>
                    </imageobject>
                </mediaobject>
            </figure>
            File Explorer is the main component of <emphasis role="bold">Domain Repository</emphasis>.
            It allows to view and manage domain files. Please reference <emphasis role="italic">Personal Repository section</emphasis> for more detailed description of file explorer.
            Keep in mind that File Explorer's options for Domain Repository may not have the same options as Personal Repository's.
        </para>
        <section xml:id="dr_explorer_open">
            <title>Opening File Explorer</title>
            <para>
                To open File Explorer, click <link linkend="dr_icon">Domain Repository icon</link> on the
                <emphasis role="bold">Navigation</emphasis> sidebar. The File Explorer displays in the left part of the
                screen, showing root folder contents. To hide it, click the icon again.
            </para>
        </section>
    </section>
    <section xml:id="file_publication">
        <title>File publication</title>
        <para>
            Publication is a tool/feature that is used to <emphasis role="italic">publish current version of a given file</emphasis>.
            It means that published file is a perfect copy only until original or published file version change after publication.
        </para>
        <para>
            Publication of files in current version of application is made from level of personal repository.
            Publishing a file creates a <emphasis role="italic">copy of current version of script file</emphasis>, and then saves file in the repository of selected domain.
            If this is the <emphasis role="italic">first file</emphasis> published for this domain â€“ a repository will be created.
        </para>
        <para>
            The version of published file is always "0.1.0". It can be manually updated when needed.
        </para>
        <section xml:id="publishing_file">
            <title>Publishing new file</title>
            <para>To publish a new file to any user-assigned domain, follow these steps:</para>
            <orderedlist>
                <listitem>
                    <para>
                        Open File Explorer of Personal Repository.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Right-click script file for publication and select <emphasis role="bold">Publish</emphasis> option
                        from the context menu.
                        <figure>
                            <title>Publish option in the File Explorer context menu</title>
                            <mediaobject>
                                <imageobject>
                                    <imagedata fileref="./images/dm_publish_cm.png" align="center" contentwidth="60%"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        A new window <emphasis role="bold">Publish to domain</emphasis> will appear. Changing name is optional.
                        <figure>
                            <title>Publish to domain view</title>
                            <mediaobject>
                                <imageobject>
                                    <imagedata fileref="./images/dm_publish_pre.png" align="center" contentwidth="60%"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Select the domain to which we want to publish the script file.
                        <figure>
                            <title>Target domain selection</title>
                            <mediaobject>
                                <imageobject>
                                    <imagedata fileref="./images/dm_publish_domains.png" align="center" contentwidth="60%"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Click <emphasis role="bold">Publish</emphasis> button to confirm.
                        <figure>
                            <title>Completed publish to domain view</title>
                            <mediaobject>
                                <imageobject>
                                    <imagedata fileref="./images/dm_publish_post.png" align="center" contentwidth="60%"/>
                                </imageobject>
                            </mediaobject>
                        </figure>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Move to Domain Repository and open selected domain for publication.
                        The published file will be visible in the domain.
                    </para>
                </listitem>
            </orderedlist>
        </section>
    </section>
    <section xml:id="recycle_bin">
        <title>Recycle Bin</title>
        <para>
            Due to public characteristics of domain repository, it is secured with a two-step deletion of files.
            Unlike a personal repository, files are not deleted permanently by domain user.
            They temporarily land in the <emphasis role="bold">Recycle Bin</emphasis>.
            In this state, they are only visible for domain manager and admin through tools made available to them only.
            Depending on their decision, it can be restored or permanently deleted (no data recovery possible).
        </para>
        <para>
            <emphasis role="bold">IMPORTANT!</emphasis>
            Due to fact that after recovery/deletion operation, state of file is not updated - it is required to refresh
            domain repository by calling context menu on it (right-click) and selecting <emphasis role="italic">"Refresh"</emphasis> option.
        </para>
        <section xml:id="drepo_delete">
            <title>Deleting Item</title>
            <para>
                To delete an item in the domain repository, follow the procedure below:
            </para>
            <orderedlist>
                <listitem>
                    <para>
                        Open the File Explorer if it's closed. See&#xa0;<xref linkend="dr_explorer_open"/>.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Browse the tree to the item that you want to delete.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Right-click the item name and select <emphasis role="bold">Delete</emphasis> option
                        from the context menu.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Warning dialog window is displayed, prompting for confirmation. Click
                        <emphasis role="bold">Yes</emphasis> button to confirm deletion.
                    </para>
                </listitem>
            </orderedlist>
        </section>
        <section xml:id="drepo_restore">
            <title>Restoring Item</title>
            <para>
                <emphasis role="bold">IMPORTANT!</emphasis> Possible only by <emphasis role="underscore">administrator</emphasis> users!
            </para>
            <para>
                To restore an item in the domain repository, follow the procedure below:
            </para>
            <orderedlist>
                <listitem>
                    <para>
                        Open the File Explorer if it's closed. See&#xa0;<xref linkend="dr_explorer_open"/>.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Browse the tree of target domain to <emphasis role="bold">Recycle Bin</emphasis>.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Right-click the item name and select <emphasis role="bold">Delete</emphasis> option
                        from the context menu.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Warning dialog window is displayed, prompting for confirmation. Click
                        <emphasis role="bold">Yes</emphasis> button to confirm deletion.
                    </para>
                </listitem>
            </orderedlist>
        </section>
    </section>
</chapter>